<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scagnostics 3D</title>
    <link href="css/styles.css" rel="stylesheet"/>
    <script src="lib/d3.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="build/js/scagnosticsnd.min.js"></script>
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            font-size: 11px;
            font-weight: 300;
            fill: #242424;
            text-align: center;
            text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff, 0 -1px 0 #fff;
            cursor: default;
        }

        .legend {
            font-family: 'Raleway', sans-serif;
            fill: #333333;
        }
    </style>
    <script charset="utf-8" src="lib/radarChart.js"></script>

</head>
<body>

<div class="radarChart" style="display: inline-flex;"></div>
<div id="controlButtons"></div>
<div id="msg"></div>

<script>




</script>
<script>
    let scag = null;
    let data = null;
    let svgWidth = 1000;
    let svgHeight = 1000;
    let duration = 1000;
    let dataPointRadius = 2;
    let dataPointOpacity = 0.9;
    let binOpacity = 0.8;
    let size = 500;
    /***********RANDOM DATA*******************/
    let randomX = d3.randomNormal(size / 2, 50),
        randomY = d3.randomNormal(size / 2, 50),
        randomZ = d3.randomNormal(size / 2, 50),
        randomU = d3.randomNormal(size / 2, 50),
        randomV = d3.randomNormal(size / 2, 50),
        points = d3.range(100).map(function () {
            return [randomX(), randomY(), randomZ(), randomU(), randomV()];
        });
    draw(points);

    // //Data
    // var data = [
    //     {
    //         name: 'Allocated budget',
    //         axes: [
    //             {axis: 'Sales', value: 42},
    //             {axis: 'Marketing', value: 20},
    //             {axis: 'Development', value: 60},
    //             {axis: 'Customer Support', value: 26},
    //             {axis: 'Information Technology', value: 35},
    //             {axis: 'Administration', value: 20}
    //         ]
    //     },
    //     {
    //         name: 'Actual Spending',
    //         axes: [
    //             {axis: 'Sales', value: 50},
    //             {axis: 'Marketing', value: 45},
    //             {axis: 'Development', value: 20},
    //             {axis: 'Customer Support', value: 20},
    //             {axis: 'Information Technology', value: 25},
    //             {axis: 'Administration', value: 23}
    //         ]
    //     }
    // ];
    function draw(points) {
        let scagOptions ={
            startBinGridSize: 10,
            minBins: 10,
            maxBins: 50
        }
        //let scagOptions = {};
        scag = scagnosticsnd(points, scagOptions);
        let normalizedPoints = scag.normalizedPoints;
        let radarData = [];
        for (let i = 0; i < normalizedPoints.length; i++) {
            let point = {};
            point.axes = [];
            for (let j = 0; j < normalizedPoints[i].length; j++) {
                let item = {
                    axis: 'd'+j,
                    value: normalizedPoints[i][j]
                }
                point.axes.push(item);
            }
            radarData.push(point);
        }
        drawRadarChart(".radarChart", radarData);
    }
    function drawRadarChart(theDiv, radarData) {
        let margin = {top: 50, right: 80, bottom: 50, left: 80},
            width = Math.min(700, window.innerWidth / 4) - margin.left - margin.right,
            height = Math.min(width, window.innerHeight - margin.top - margin.bottom);
        let radarChartOptions = {
            w: 290,
            h: 350,
            margin: margin,
            maxValue: 1,
            levels: 5,
            roundStrokes: false,
            color: d3.scaleOrdinal(d3.schemeBlues[9]),
            format: '.0f',
            legend: {title: 'Organization XYZ', translateX: 200, translateY: 40},

        };

        // Draw the chart, get a reference the created svg element :
        let svg_radar = RadarChart(theDiv, radarData, radarChartOptions);
        return svg_radar;
    }
</script>
</body>
</html>